<!DOCTYPE html>
<html lang="ja">
<head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-HED6D0FR4L"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-HED6D0FR4L');
</script>
    <meta charset="UTF-8">
    <title>Playãƒã‚¤ãƒ³ãƒˆè¨ˆç®—æ©Ÿ </title> <!-- ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯é©å®œæ›´æ–° -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3845885843809455"
     crossorigin="anonymous"></script>
    <style>
      /* åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ« */
body {
  margin: 0;
  padding: 0.8em;
  background: #eef;
  font-family: sans-serif;
  text-align: center;
  font-size: 15px;
}

/* ãƒ˜ãƒƒãƒ€ãƒ¼ãƒªãƒ³ã‚¯ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
.header-links {
  text-align: right;
  margin-bottom: 0.5em;
  font-size: 0.8em;
  overflow: hidden; /* To contain the floated element */
}
.header-links a {
  color: #555;
  text-decoration: none;
  margin-left: 1em; /* ãƒªãƒ³ã‚¯é–“ã®ã‚¹ãƒšãƒ¼ã‚¹ */
}
.header-links a.international-link {
  float: left;
  margin-left: 0; /* Remove margin for the floated link */
  margin-right: 1em; /* Optional: add some space if other elements were to its right */
}
.header-links a:not(.international-link):first-child {
  /* This selector might need adjustment if the international link is not the absolute first child */
  /* margin-left: 0; */ /* No longer needed if international link is floated */
}
.header-links a:hover {
  text-decoration: underline;
}

h1 {
  color: #333;
  font-size: 1.6em;
  margin-bottom: 0.6em; /* h1ä¸‹ã®ãƒãƒ¼ã‚¸ãƒ³å°‘ã—èª¿æ•´ */
}

/* â–¼â–¼â–¼ è¿½åŠ : ã‚µã‚¤ãƒˆç´¹ä»‹æ–‡ã‚¹ã‚¿ã‚¤ãƒ« â–¼â–¼â–¼ */
.site-description {
  font-size: 0.95em;
  color: #555;
  margin: 0.5em auto 1.2em auto; /* ä¸Šä¸‹ãƒãƒ¼ã‚¸ãƒ³èª¿æ•´ */
  max-width: 500px; /* å¹…åˆ¶é™ */
  line-height: 1.6;
  text-align: center;
}
/* â–²â–²â–² è¿½åŠ : ã‚µã‚¤ãƒˆç´¹ä»‹æ–‡ã‚¹ã‚¿ã‚¤ãƒ« â–²â–²â–² */

h2 {
  color: #333;
  font-size: 1.3em;
  margin-bottom: 0.8em;
  border-bottom: 2px solid #eee;
  padding-bottom: 0.3em;
}

.section {
  background: #fff;
  border-radius: 10px;
  padding: 1.2em;
  margin: 0.8em auto;
  max-width: 480px;
  box-shadow: 0 3px 12px rgba(0,0,0,0.08);
  position: relative;
  text-align: left;
}

/* ãƒ•ã‚©ãƒ¼ãƒ è¦ç´ ã‚¹ã‚¿ã‚¤ãƒ« */
label {
  display: block;
  margin-bottom: 1em;
  color: #555;
  font-weight: bold;
  font-size: 0.95em;
}

/* select ã¨ input[type=number] ã«å…±é€šã®ã‚¹ã‚¿ã‚¤ãƒ« */
select,
input[type="number"] {
  font-size: 1em;
  padding: 0.5em;
  width: 100%; /* è¦ªè¦ç´ ã«å¯¾ã—ã¦100%å¹… */
  max-width: none; /* æœ€å¤§å¹…ã®åˆ¶é™ãªã— */
  margin: 0.4em auto 0 auto; /* ä¸Šãƒãƒ¼ã‚¸ãƒ³ã€å·¦å³autoã€ä¸‹ãƒãƒ¼ã‚¸ãƒ³ãªã— */
  display: block;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box; /* paddingã¨borderã‚’å¹…è¨ˆç®—ã«å«ã‚ã‚‹ */
}

/* ã‚¹ãƒ”ãƒŠãƒ¼ãƒœã‚¿ãƒ³ã®éè¡¨ç¤º */
input[type="number"] {
  appearance: none; /* æ¨™æº–ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ */
  -moz-appearance: textfield; /* Firefox */
}
input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button {
  appearance: none; /* æ¨™æº–ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ */
  -webkit-appearance: none; /* Webkitç³»ãƒ–ãƒ©ã‚¦ã‚¶ç”¨ */
  margin: 0;
}


/* ãƒœã‚¿ãƒ³ ã‚¹ã‚¿ã‚¤ãƒ« */
button {
  font-size: 1.05em;
  padding: 0.6em 1.5em;
  background: #28a745; /* åŸºæœ¬è‰² */
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  margin-top: 1em;
  transition: background-color 0.2s ease;
}
button:hover:not(:disabled) {
  background-color: #218838; /* ãƒ›ãƒãƒ¼è‰² */
}
button:disabled {
  background-color: #aaa; /* ç„¡åŠ¹æ™‚ã®è‰² */
  cursor: not-allowed;
}


/* è¨ˆç®—çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ã®åˆæœŸã‚¹ã‚¿ã‚¤ãƒ« */
.result {
  font-weight: bold;
  margin-top: 1em;    /* ä¸Šä¸‹ã®ãƒãƒ¼ã‚¸ãƒ³ã®ã¿é©ç”¨ */
  margin-bottom: 0.8em;
  font-size: 1.1em;
  line-height: 1.5;
  /* åˆæœŸçŠ¶æ…‹ã§ã¯æ ç·šã€èƒŒæ™¯ã€ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ãªã— */
}

/* çµæœãŒè¡¨ç¤ºã•ã‚ŒãŸæ™‚ã®ã‚¹ã‚¿ã‚¤ãƒ« */
.result.has-result {
  padding: 0.8em; /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚° */
  background-color: #f8f9fa; /* èƒŒæ™¯è‰² */
  border-left: 4px solid #28a745; /* å·¦ã®ã‚¢ã‚¯ã‚»ãƒ³ãƒˆç·š */
  border-radius: 4px; /* è§’ä¸¸ï¼ˆå·¦ã®ç·šã«åˆã‚ã›ã‚‹ï¼‰ */
  text-align: left;
}
.result b {
  color: #007bff; /* å¼·èª¿ãƒ†ã‚­ã‚¹ãƒˆã®è‰² */
}


/* ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ */
.tab-switch {
  margin-top: 0.8em;
  margin-bottom: 1em;
  text-align: center;
}
.tab-switch button {
  background: #6c757d; /* éã‚¢ã‚¯ãƒ†ã‚£ãƒ–è‰² */
  margin: 0 0.4em;
  font-size: 1em;
  padding: 0.5em 1.2em;
  font-weight: normal; /* éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã¯é€šå¸¸ã®å¤ªã• */
}
.tab-switch button:hover:not(.active) {
   background-color: #5a6268;
}
/* ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã‚¿ãƒ–ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
.tab-switch button.active {
  background: #28a745; /* ã‚¢ã‚¯ãƒ†ã‚£ãƒ–è‰² */
  font-weight: bold;   /* ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã¯å¤ªå­— */
}


/* æƒ…å ±ãƒœã‚¿ãƒ³ (?) ã‚¹ã‚¿ã‚¤ãƒ« */
.info-btn {
  background: #aaa;
  color: white;
  border-radius: 50%;
  width: 1.5em;
  height: 1.5em;
  line-height: 1.5em;
  font-size: 0.8em;
  font-weight: bold;
  text-align: center;
  display: inline-block;
  cursor: pointer;
  margin-left: 0.4em;
  position: relative;
  vertical-align: middle;
  user-select: none;
  border: 2px solid transparent; /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒªãƒ³ã‚°ç”¨ */
}
/* ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã®ã‚¹ã‚¿ã‚¤ãƒ« */
.info-btn:focus {
  outline: none; /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³é™¤å» */
  border-color: #007bff; /* é’ã„ãƒœãƒ¼ãƒ€ãƒ¼ã§ãƒ•ã‚©ãƒ¼ã‚«ã‚¹è¡¨ç¤º */
  box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25); /* ã•ã‚‰ã«å½±ã‚’è¿½åŠ  (ä»»æ„) */
}


/* ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ãƒœãƒƒã‚¯ã‚¹ ã‚¹ã‚¿ã‚¤ãƒ« */
.tooltip-box {
  display: none; /* åˆæœŸéè¡¨ç¤º */
  position: absolute;
  background: rgba(51, 51, 51, 0.95);
  color: white;
  padding: 0.9em;
  border-radius: 8px;
  font-size: 0.9em;
  white-space: pre-line; /* æ”¹è¡Œã‚’æœ‰åŠ¹ã« */
  max-width: 340px; /* æœ€å¤§å¹… */
  top: 1.8em; /* ãƒœã‚¿ãƒ³ã®ä¸‹ã«é…ç½® */
  left: 55%;   /* å°‘ã—å³å¯„ã‚Šã« */
  transform: translateX(-50%); /* ä¸­å¤®å¯„ã›èª¿æ•´ */
  z-index: 1000; /* æœ€å‰é¢ã« */
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  text-align: left;
  font-weight: normal;
  word-break: keep-all;      /* æ—¥æœ¬èªã®æ”¹è¡Œèª¿æ•´ */
  overflow-wrap: break-word; /* é•·ã„è‹±å˜èªã®æŠ˜ã‚Šè¿”ã— */
}
/* ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—è¡¨ç¤ºæ™‚ã®ã‚¹ã‚¿ã‚¤ãƒ« */
.tooltip-box.visible {
  display: block;
}

/* è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */
.warning {
  color: #dc3545; /* bootstrap ã® danger è‰² */
  font-size: 0.85em;
  margin-top: 0.8em;
  padding: 0.6em;
  background-color: #f8d7da; /* bootstrap ã® danger èƒŒæ™¯è‰² */
  border: 1px solid #f5c6cb; /* bootstrap ã® danger ãƒœãƒ¼ãƒ€ãƒ¼è‰² */
  border-radius: 4px;
  line-height: 1.4;
}

/* ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ */
#copyButton {
  background: #007bff; /* é’è‰² */
  font-size: 0.9em;
  margin-left: 0.5em; /* è¨ˆç®—ãƒœã‚¿ãƒ³ã¨ã®é–“ã«ä½™ç™½ */
}
#copyButton:hover {
  background-color: #0056b3;
}

/* ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
#tweetButton { /* é€šå¸¸ãƒ¢ãƒ¼ãƒ‰ã®ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ */
  background: #1DA1F2; /* Twitterãƒ–ãƒ«ãƒ¼ */
  font-size: 1em; 
  padding: 0.6em 1.2em;
  margin-top: 0.8em; 
  display: block; 
  margin-left: auto;
  margin-right: auto;
  width: fit-content; 
}
#tweetButton:hover {
  background-color: #0c85d0;
}

/* é€†ç®—ãƒ¢ãƒ¼ãƒ‰ã®ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« (æ—¢å­˜ã® .share-button, .twitter-share-button ã‚’æµç”¨ã™ã‚‹æƒ³å®š) */
/* ã‚‚ã— #share-twitter-reverse ã«ç‰¹æœ‰ã®ã‚¹ã‚¿ã‚¤ãƒ«ãŒå¿…è¦ãªã‚‰ã“ã“ã«è¿½åŠ  */
#share-twitter-reverse { /* é€†ç®—ãƒ¢ãƒ¼ãƒ‰ã®ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ */
    background: #1DA1F2; /* Twitterãƒ–ãƒ«ãƒ¼ */
    font-size: 1em;
    padding: 0.6em 1.2em;
    margin-top: 0.8em;
    display: block; /* or inline-flex if you prefer */
    margin-left: auto;
    margin-right: auto;
    width: fit-content;
    /* ã‚¢ã‚¤ã‚³ãƒ³ã¨ãƒ†ã‚­ã‚¹ãƒˆã®é…ç½®èª¿æ•´ (ã‚‚ã—FontAwesomeã®iã‚¿ã‚°ã‚’ä½¿ã†ãªã‚‰) */
    /* display: inline-flex; */
    /* align-items: center; */
}
#share-twitter-reverse i { /* FontAwesomeã‚¢ã‚¤ã‚³ãƒ³ç”¨ã®ãƒãƒ¼ã‚¸ãƒ³ */
    margin-right: 0.5em;
}
#share-twitter-reverse:hover {
  background-color: #0c85d0;
}


/* éè¡¨ç¤ºç”¨ã‚¯ãƒ©ã‚¹ */
.hidden {
  display: none !important; /* ç¢ºå®Ÿã«éè¡¨ç¤ºã«ã™ã‚‹ */
}

/* ãƒ•ãƒƒã‚¿ãƒ¼ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
.page-footer {
  margin-top: 2em;
  padding-top: 1em;
  border-top: 1px solid #ddd;
  text-align: center;
  font-size: 0.9em;
  color: #666;
}
.page-footer p {
  margin-bottom: 0.5em;
}
.page-footer a {
  color: #555;
  text-decoration: none;
  margin: 0 0.5em;
}
.page-footer a:hover {
  text-decoration: underline;
}
.copyright {
  margin-top: 0.8em;
  font-size: 0.8em;
}
    </style>
</head>
<body>

    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ãƒªãƒ³ã‚¯ -->
    <div class="header-links">
        <a href="international_info.html" class="international-link">ğŸŒ For International Users</a> | 
        <a href="privacy.html" target="_blank">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a> |
        <a href="terms.html" target="_blank">åˆ©ç”¨è¦ç´„</a>
    </div>

    <h1>Playãƒã‚¤ãƒ³ãƒˆè¨ˆç®—æ©Ÿ</h1> <!-- ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯é©å®œæ›´æ–° -->

    <!-- â–¼â–¼â–¼ è¿½åŠ : ã‚µã‚¤ãƒˆç´¹ä»‹æ–‡ â–¼â–¼â–¼ -->
    <p class="site-description">ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‹ã‚‰ç›®æ¨™é”æˆã¾ã§ã®å¿…è¦èª²é‡‘é¡ã®è¨ˆç®—ãŒã§ãã¾ã™ï¼<br>
        ã•ã‚‰ã«èª²é‡‘é¡ã‹ã‚‰ç²å¾—ã§ãã‚‹ãƒã‚¤ãƒ³ãƒˆã‚‚è¨ˆç®—ã§ãã¾ã™ï¼</p>
    <!-- â–²â–²â–² è¿½åŠ : ã‚µã‚¤ãƒˆç´¹ä»‹æ–‡ â–²â–²â–² -->

    <div class="tab-switch">
        <button data-mode="main">é€šå¸¸è¨ˆç®—</button>
        <button data-mode="reverse">é€†ç®—ãƒ¢ãƒ¼ãƒ‰</button>
    </div>

    <!-- é€šå¸¸è¨ˆç®—ãƒ¢ãƒ¼ãƒ‰ -->
    <div id="mainMode">
        <div class="section">
            <h2>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å…¥åŠ›</h2>

            <label for="currentStatus">ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
                <span class="info-btn" role="button" tabindex="0" aria-haspopup="true" aria-expanded="false">?</span>
                <div class="tooltip-box">
                    â–  ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ç¢ºèªæ–¹æ³•:<br>
                    1 Google Play ã‚¹ãƒˆã‚¢ã‚’é–‹ã<br>
                    2 å³ä¸Šã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¿ãƒƒãƒ—<br>
                    3 ã€ŒPlay ãƒã‚¤ãƒ³ãƒˆã€ã‚’é¸æŠ<br>
                    â†’ ã‚ãªãŸã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆä¾‹ï¼šã‚´ãƒ¼ãƒ«ãƒ‰ï¼‰ãŒè¡¨ç¤ºã•ã‚Œã¾ã™<br>
                    <br>
                    â€» ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã«ã‚ˆã‚ŠåŸºæœ¬é‚„å…ƒç‡ãŒè‡ªå‹•å…¥åŠ›ã•ã‚Œã¾ã™
                </div>
                <select id="currentStatus">
                    <option value="1.0">ãƒ–ãƒ­ãƒ³ã‚º</option>
                    <option value="1.25">ã‚·ãƒ«ãƒãƒ¼</option>
                    <option value="1.5" selected>ã‚´ãƒ¼ãƒ«ãƒ‰</option>
                    <option value="1.75">ãƒ—ãƒ©ãƒãƒŠ</option>
                    <option value="2.0">ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰</option>
                </select>
            </label>

            <label for="targetStatus">ç›®æ¨™ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
                <span class="info-btn" role="button" tabindex="0" aria-haspopup="true" aria-expanded="false">?</span>
                <div class="tooltip-box">
                    â–  ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®æ¡ä»¶ç›®å®‰:<br>
                    ãƒ»ã‚·ãƒ«ãƒãƒ¼ï¼š 250ptä»¥ä¸Š<br>
                    ãƒ»ã‚´ãƒ¼ãƒ«ãƒ‰ï¼š 1,000ptä»¥ä¸Š<br>
                    ãƒ»ãƒ—ãƒ©ãƒãƒŠï¼š 3,000ptä»¥ä¸Š<br>
                    ãƒ»ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ï¼š 15,000ptä»¥ä¸Š
                </div>
                <select id="targetStatus"></select> <!-- optionã¯JSã§ç”Ÿæˆ -->
            </label>

            <label for="neededPoints">ç›®æ¨™ã¾ã§ã®å¿…è¦ãƒã‚¤ãƒ³ãƒˆ
                <span class="info-btn" role="button" tabindex="0" aria-haspopup="true" aria-expanded="false">?</span>
                <div class="tooltip-box">
                    â–  å¿…è¦ãƒã‚¤ãƒ³ãƒˆã®ç¢ºèªæ–¹æ³•:<br>
                    1 Google Play ã‚¹ãƒˆã‚¢ã‚’é–‹ã<br>
                    2 ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚¢ã‚¤ã‚³ãƒ³ â†’ Play ãƒã‚¤ãƒ³ãƒˆ<br>
                    â†’ ã€Œæ¬¡ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¾ã§â—¯â—¯ptã€ã¨è¡¨ç¤ºã•ã‚Œã¾ã™<br>
                    â†’ ãã®æ•°å€¤ã‚’ã“ã“ã«å…¥åŠ›ã—ã¦ãã ã•ã„
                </div>
                <input type="number" id="neededPoints" placeholder="ä¾‹ï¼š1728">
            </label>
        </div>

        <div class="section">
            <h2>é‚„å…ƒè¨­å®š</h2>

            <label for="baseRate">100å††ã‚ãŸã‚Šã®åŸºæœ¬é‚„å…ƒãƒã‚¤ãƒ³ãƒˆ
                <span class="info-btn" role="button" tabindex="0" aria-haspopup="true" aria-expanded="false">?</span>
                <div class="tooltip-box">
                    â–  é‚„å…ƒãƒã‚¤ãƒ³ãƒˆã®å…¥åŠ›:<br>
                    ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã«å¿œã˜ã¦è‡ªå‹•å…¥åŠ›ã•ã‚Œã¾ã™<br>
                    ã‚¢ãƒ—ãƒªå›ºæœ‰ã®ãƒã‚¤ãƒ³ãƒˆå¢—é‡ãŒã‚ã‚‹å ´åˆãªã©<br>
                    ç›´æ¥ç·¨é›†ã—ã¦æœ€çµ‚çš„ãªé‚„å…ƒç‡ã‚’å…¥åŠ›ã—ã¾ã™<br>
                    <br>
                    â€» ä¸‹ã®å€ç‡ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ã¨è‡ªå‹•æ¯”è¼ƒã•ã‚Œ<br>
                       æœ‰åˆ©ãªæ–¹ãŒè¨ˆç®—ã«é©ç”¨ã•ã‚Œã¾ã™
                </div>
                <input type="number" id="baseRate" value="1.5" step="0.01" min="0.1" max="100">
            </label>

            <label for="multiplier">ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³å€ç‡ï¼ˆä¾‹ï¼š3å€ï¼‰
                <span class="info-btn" role="button" tabindex="0" aria-haspopup="true" aria-expanded="false">?</span>
                <div class="tooltip-box">
                    â–  ãƒã‚¤ãƒ³ãƒˆå€ç‡ã¨ã¯<br>
                    ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã«å¿œã˜ãŸé‚„å…ƒãƒã‚¤ãƒ³ãƒˆãŒ<br>
                    æœŸé–“ä¸­ã«å¢—åŠ ã™ã‚‹ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ã®å€ç‡ã§ã™<br>
                    (ä¾‹: ã‚´ãƒ¼ãƒ«ãƒ‰1.5pt Ã— 3å€ = 4.5pt)<br>
                    <br>
                    â€» ä¸Šè¨˜ã®åŸºæœ¬é‚„å…ƒãƒã‚¤ãƒ³ãƒˆå…¥åŠ›å€¤ã¨æ¯”è¼ƒã•ã‚Œ<br>
                       æœ‰åˆ©ãªæ–¹ãŒè¨ˆç®—ã«é©ç”¨ã•ã‚Œã¾ã™
                </div>
                <input type="number" id="multiplier" value="1" step="0.1" min="1" max="10">
            </label>

            <div class="warning">
                â€» ãƒã‚¤ãƒ³ãƒˆå¢—é‡/å€ç‡ã«ã¤ã„ã¦:<br>è¨ˆç®—æ™‚ã€å…¥åŠ›å€¤ã¨(ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹Ã—å€ç‡)ã‚’æ¯”è¼ƒã—ã€ã‚ˆã‚Šæœ‰åˆ©ãªæ–¹ãŒè‡ªå‹•é©ç”¨ã•ã‚Œã¾ã™ (ä½µç”¨ä¸å¯)
            </div>
        </div>

        <div class="section">
            <button id="calculateButton">èª²é‡‘é¡ã‚’è¨ˆç®—</button>
            <div class="result" id="result"></div> <!-- çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ -->
            <button id="copyButton">ã‚³ãƒ”ãƒ¼ã™ã‚‹</button>
            <!-- ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ (åˆæœŸéè¡¨ç¤º) -->
            <button id="tweetButton" class="hidden">çµæœã‚’Xã§ã‚·ã‚§ã‚¢</button>
        </div>
    </div>

    <!-- é€†ç®—ãƒ¢ãƒ¼ãƒ‰ -->
    <div id="reverseMode" style="display:none;">
        <div class="section">
            <h2>é€†ç®—ãƒ¢ãƒ¼ãƒ‰</h2>

            <label for="amountYen">èª²é‡‘é¡ï¼ˆå††ï¼‰
                <span class="info-btn" role="button" tabindex="0" aria-haspopup="true" aria-expanded="false">?</span>
                <div class="tooltip-box">
                    â–  ä½¿ã£ãŸé‡‘é¡ã‹ã‚‰ãƒã‚¤ãƒ³ãƒˆè¨ˆç®—:<br>
                    èª²é‡‘é¡ã‚’å…¥åŠ›ã™ã‚‹ã¨<br>
                    ç²å¾—ã§ãã‚‹ãƒã‚¤ãƒ³ãƒˆæ•°ã‚’äºˆæ¸¬ã—ã¾ã™
                </div>
                <input type="number" id="amountYen" placeholder="ä¾‹ï¼š5000">
            </label>

            <label for="reverseStatus">ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
                <span class="info-btn" role="button" tabindex="0" aria-haspopup="true" aria-expanded="false">?</span>
                <div class="tooltip-box">
                    â–  ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã”ã¨ã®é‚„å…ƒç‡ç›®å®‰:<br>
                    ãƒ»ãƒ–ãƒ­ãƒ³ã‚ºï¼š 1.0pt / 100å††<br>
                    ãƒ»ã‚·ãƒ«ãƒãƒ¼ï¼š 1.25pt / 100å††<br>
                    ãƒ»ã‚´ãƒ¼ãƒ«ãƒ‰ï¼š 1.5pt / 100å††<br>
                    ãƒ»ãƒ—ãƒ©ãƒãƒŠï¼š 1.75pt / 100å††<br>
                    ãƒ»ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ï¼š 2.0pt / 100å††<br>
                    <br>
                    â€» ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é¸æŠã§åŸºæœ¬é‚„å…ƒç‡ãŒè‡ªå‹•å…¥åŠ›ã•ã‚Œ<br>
                       å€ç‡ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³é©ç”¨ã®æ¯”è¼ƒã«ä½¿ã‚ã‚Œã¾ã™
                </div>
                <select id="reverseStatus">
                    <option value="1.0">ãƒ–ãƒ­ãƒ³ã‚º</option>
                    <option value="1.25">ã‚·ãƒ«ãƒãƒ¼</option>
                    <option value="1.5" selected>ã‚´ãƒ¼ãƒ«ãƒ‰</option>
                    <option value="1.75">ãƒ—ãƒ©ãƒãƒŠ</option>
                    <option value="2.0">ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰</option>
                </select>
            </label>

            <label for="reverseBaseRate">100å††ã‚ãŸã‚Šã®åŸºæœ¬é‚„å…ƒãƒã‚¤ãƒ³ãƒˆ
                <span class="info-btn" role="button" tabindex="0" aria-haspopup="true" aria-expanded="false">?</span>
                <div class="tooltip-box">
                     â–  é‚„å…ƒãƒã‚¤ãƒ³ãƒˆã®å…¥åŠ›:<br>
                     ä¸Šã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã«å¿œã˜ã¦è‡ªå‹•å…¥åŠ›ã•ã‚Œã¾ã™<br>
                     ã‚¢ãƒ—ãƒªå›ºæœ‰ã®ãƒã‚¤ãƒ³ãƒˆå¢—é‡ãŒã‚ã‚‹å ´åˆãªã©<br>
                     ç›´æ¥ç·¨é›†ã—ã¦æœ€çµ‚çš„ãªé‚„å…ƒç‡ã‚’å…¥åŠ›ã—ã¾ã™<br>
                    <br>
                    â€» ä¸‹ã®å€ç‡ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ã¨è‡ªå‹•æ¯”è¼ƒã•ã‚Œ<br>
                       æœ‰åˆ©ãªæ–¹ãŒè¨ˆç®—ã«é©ç”¨ã•ã‚Œã¾ã™
                </div>
                <input type="number" id="reverseBaseRate" value="1.5" step="0.01" min="0.1" max="100">
            </label>

            <label for="reverseMultiplier">ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³å€ç‡
                <span class="info-btn" role="button" tabindex="0" aria-haspopup="true" aria-expanded="false">?</span>
                <div class="tooltip-box">
                    â–  ãƒã‚¤ãƒ³ãƒˆå€ç‡ã¨ã¯<br>
                    ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã«å¿œã˜ãŸé‚„å…ƒãƒã‚¤ãƒ³ãƒˆãŒ<br>
                    æœŸé–“ä¸­ã«å¢—åŠ ã™ã‚‹ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ã®å€ç‡ã§ã™<br>
                    (ä¾‹: ã‚´ãƒ¼ãƒ«ãƒ‰1.5pt Ã— 3å€ = 4.5pt)<br>
                    <br>
                    â€» ä¸Šè¨˜ã®åŸºæœ¬é‚„å…ƒãƒã‚¤ãƒ³ãƒˆå…¥åŠ›å€¤ã¨æ¯”è¼ƒã•ã‚Œ<br>
                       æœ‰åˆ©ãªæ–¹ãŒè¨ˆç®—ã«é©ç”¨ã•ã‚Œã¾
                </div>
                <input type="number" id="reverseMultiplier" value="1" step="0.1" min="1" max="10">
            </label>

            <div class="warning">
                â€» ãƒã‚¤ãƒ³ãƒˆå¢—é‡/å€ç‡ã«ã¤ã„ã¦:<br>è¨ˆç®—æ™‚ã€å…¥åŠ›å€¤ã¨(ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹Ã—å€ç‡)ã‚’æ¯”è¼ƒã—ã€ã‚ˆã‚Šæœ‰åˆ©ãªæ–¹ãŒè‡ªå‹•é©ç”¨ã•ã‚Œã¾ã™ (ä½µç”¨ä¸å¯)
            </div>


            <button id="reverseCalculateButton">ãƒã‚¤ãƒ³ãƒˆã‚’è¨ˆç®—</button>
            <div class="result" id="reverseResult"></div>
        </div>
        <!-- é€†ç®—ãƒ¢ãƒ¼ãƒ‰ã®ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ (HTMLã¯æ—¢ã«ä¿®æ­£æ¸ˆã¿ã¨ä»®å®š) -->
        <button id="share-twitter-reverse" class="share-button twitter-share-button hidden"> <!-- hiddenã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ  -->
            <i class="fab fa-twitter"></i> Xã§ã‚·ã‚§ã‚¢ã™ã‚‹
        </button>
    </div>

    <script>
      (function() {
    'use strict'; // Strictãƒ¢ãƒ¼ãƒ‰ã‚’æœ‰åŠ¹åŒ–

    // --- å®šæ•°å®šç¾© ---
    const CLASS_VISIBLE = 'visible';
    const CLASS_HAS_RESULT = 'has-result';
    const CLASS_ACTIVE = 'active';
    const CLASS_HIDDEN = 'hidden';
    const SELECTOR_INFO_BTN = '.info-btn';
    const SELECTOR_TOOLTIP_BOX = '.tooltip-box';
    const SELECTOR_RESULT_ERROR = 'span[style*="color: red"]'; // æ—¢å­˜ã®ã‚¨ãƒ©ãƒ¼ã‚»ãƒ¬ã‚¯ã‚¿

    // ç›®æ¨™ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¨å¿…è¦ãƒã‚¤ãƒ³ãƒˆ
    const statusThresholds = { "ã‚·ãƒ«ãƒãƒ¼": 250, "ã‚´ãƒ¼ãƒ«ãƒ‰": 1000, "ãƒ—ãƒ©ãƒãƒŠ": 3000, "ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰": 15000 };
    // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¨é¸æŠå¯èƒ½ãªç›®æ¨™
    const statusPointsMapping = { 1.0: ["ã‚·ãƒ«ãƒãƒ¼", "ã‚´ãƒ¼ãƒ«ãƒ‰", "ãƒ—ãƒ©ãƒãƒŠ", "ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰"], 1.25: ["ã‚´ãƒ¼ãƒ«ãƒ‰", "ãƒ—ãƒ©ãƒãƒŠ", "ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰"], 1.5: ["ãƒ—ãƒ©ãƒãƒŠ", "ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰"], 1.75: ["ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰"], 2.0: [] };
    // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å€¤ã¨åŸºæœ¬é‚„å…ƒç‡ã®ãƒãƒƒãƒ”ãƒ³ã‚°
    const statusRates = { 1.0: 1.0, 1.25: 1.25, 1.5: 1.5, 1.75: 1.75, 2.0: 2.0 };


    // --- DOMè¦ç´ å‚ç…§ (åˆæœŸåŒ–æ™‚ã«è¨­å®š) ---
    let mainModeDiv, reverseModeDiv, tabButtons,
        currentStatusSelect, baseRateInput, targetStatusSelect, neededPointsInput, multiplierInput, calculateButton, resultDiv, copyButton, tweetButton,
        amountYenInput, reverseStatusSelect, reverseBaseRateInput, reverseMultiplierInput, reverseCalculateButton, reverseResultDiv,
        infoButtons,
        shareTwitterReverseButton; // â˜… é€†ç®—ãƒ¢ãƒ¼ãƒ‰ã®ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ã®å¤‰æ•°ã‚’è¿½åŠ 

    // --- é–¢æ•°å®šç¾© ---

    function getRemainingMonths() {
        const today = new Date();
        return 12 - today.getMonth();
    }

    function updateBaseRateAndTarget() {
        if (!currentStatusSelect || !baseRateInput || !targetStatusSelect) { console.warn("updateBaseRateAndTarget: DOMè¦ç´ æœªåˆæœŸåŒ–"); return; }
        try {
            const currentStatusValue = parseFloat(currentStatusSelect.value);
            const rate = statusRates[currentStatusValue] || 1.0;
            baseRateInput.value = rate.toFixed(2);

            targetStatusSelect.innerHTML = "";
            const availableTargets = statusPointsMapping[currentStatusValue] || [];
            availableTargets.forEach(targetLabel => {
                const points = statusThresholds[targetLabel];
                if (points) {
                    const option = document.createElement("option");
                    option.value = points;
                    option.textContent = `${targetLabel} (${points}pt)`;
                    option.dataset.statusLabel = targetLabel; // data-status-label ã‚’è¿½åŠ 
                    targetStatusSelect.appendChild(option);
                }
            });
            if (availableTargets.length === 0) {
                const option = document.createElement("option");
                option.textContent = "æ¬¡ã®ç›®æ¨™ã¯ã‚ã‚Šã¾ã›ã‚“";
                option.disabled = true;
                targetStatusSelect.appendChild(option);
            }
        } catch(error) {
             console.error("updateBaseRateAndTarget é–¢æ•°ã§ã‚¨ãƒ©ãƒ¼:", error);
        }
    }

    function updateReverseBaseRate() {
        if (!reverseStatusSelect || !reverseBaseRateInput) { console.warn("updateReverseBaseRate: DOMè¦ç´ æœªåˆæœŸåŒ–"); return; }
        try {
            const selectedStatusValue = parseFloat(reverseStatusSelect.value);
            const rate = statusRates[selectedStatusValue] || 1.0;
            reverseBaseRateInput.value = rate.toFixed(2);
        } catch(error) {
            console.error("updateReverseBaseRate é–¢æ•°ã§ã‚¨ãƒ©ãƒ¼:", error);
        }
    }


    function getValidNumberInput(element, minValue = -Infinity, maxValue = Infinity) {
        if (!element) { console.error("getValidNumberInput: è¦ç´ ãŒnull"); return null; }
        const value = parseFloat(element.value);
        if (isNaN(value) || value < minValue || value > maxValue) { return null; }
        return value;
    }

     function displayError(targetElement, message) {
        if (!targetElement) { console.error("displayError: å¯¾è±¡è¦ç´ ãŒnull"); return; }
        targetElement.innerHTML = `<span style="color: red;">${message}</span>`;
        targetElement.classList.add(CLASS_HAS_RESULT);
        // ã‚¨ãƒ©ãƒ¼æ™‚ã¯ãƒ‡ãƒ¼ã‚¿å±æ€§å‰Šé™¤ & ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³éè¡¨ç¤º
        targetElement.removeAttribute('data-required-yen');
        targetElement.removeAttribute('data-target-status-label');
        if (tweetButton && targetElement === resultDiv) tweetButton.classList.add(CLASS_HIDDEN);
        // â˜… é€†ç®—ãƒ¢ãƒ¼ãƒ‰ã®ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ã‚‚ã‚¨ãƒ©ãƒ¼æ™‚ã«éš ã™
        if (shareTwitterReverseButton && targetElement === reverseResultDiv) {
            shareTwitterReverseButton.classList.add(CLASS_HIDDEN);
        }
     }

     function clearResult(targetElement) {
         if (!targetElement) return;
         targetElement.innerHTML = "";
         targetElement.classList.remove(CLASS_HAS_RESULT);
         // çµæœã‚¯ãƒªã‚¢æ™‚ã‚‚ãƒ‡ãƒ¼ã‚¿å±æ€§å‰Šé™¤ & ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³éè¡¨ç¤º
         targetElement.removeAttribute('data-required-yen');
         targetElement.removeAttribute('data-target-status-label');
         // â˜… é€†ç®—ãƒ¢ãƒ¼ãƒ‰ç”¨ã®ãƒ‡ãƒ¼ã‚¿å±æ€§ã‚‚ã‚¯ãƒªã‚¢
         targetElement.removeAttribute('data-earned-points');
         targetElement.removeAttribute('data-amount-yen');

         if (tweetButton && targetElement === resultDiv) {
             tweetButton.classList.add(CLASS_HIDDEN);
         }
         // â˜… é€†ç®—ãƒ¢ãƒ¼ãƒ‰ã®ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ã‚‚çµæœã‚¯ãƒªã‚¢æ™‚ã«éš ã™
         if (shareTwitterReverseButton && targetElement === reverseResultDiv) {
             shareTwitterReverseButton.classList.add(CLASS_HIDDEN);
         }
     }

    /**
     * æœ‰åˆ©ãªæ–¹ã®é‚„å…ƒç‡ã‚’æ±ºå®šã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
     */
    function getFinalRate(baseRateElement, statusSelectElement, multiplierElement) {
        const editedBaseRate = getValidNumberInput(baseRateElement, 0.01);
        const multiplier = getValidNumberInput(multiplierElement, 1);
        const statusValue = parseFloat(statusSelectElement.value);
        const statusRate = statusRates[statusValue];

        if (editedBaseRate === null || multiplier === null || !statusRate) {
            console.error("getFinalRate: å…¥åŠ›å€¤ã¾ãŸã¯ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ¬ãƒ¼ãƒˆãŒç„¡åŠ¹ã§ã™ã€‚", {editedBaseRate, multiplier, statusValue, statusRate});
            return null;
        }

        const rateFromMultiplier = statusRate * multiplier;
        const finalRate = Math.max(editedBaseRate, rateFromMultiplier);
        return finalRate;
    }


    /**
     * é€šå¸¸ãƒ¢ãƒ¼ãƒ‰ã§ã®å¿…è¦èª²é‡‘é¡ã‚’è¨ˆç®—
     */
    function calculate() {
        if (!resultDiv || !targetStatusSelect) return;
        clearResult(resultDiv); // clearResult ã¯ tweetButton ã‚’éš ã™å‡¦ç†ã‚’å«ã‚€

        try {
            const neededPoints = getValidNumberInput(neededPointsInput, 0.01);
            const finalRate = getFinalRate(baseRateInput, currentStatusSelect, multiplierInput);
            const selectedTargetOption = targetStatusSelect.options[targetStatusSelect.selectedIndex];
            const targetStatusLabel = selectedTargetOption ? selectedTargetOption.dataset.statusLabel : null;

            if (neededPoints === null || finalRate === null || !targetStatusLabel) {
                 displayError(resultDiv, "æœ‰åŠ¹ãªæ•°å€¤ã‚’å…¥åŠ›ã—ã€ç›®æ¨™ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’é¸æŠã—ã¦ãã ã•ã„");
                 return;
            }
            if (finalRate <= 0) {
                 displayError(resultDiv, "è¨ˆç®—ã«ä½¿ç”¨ã™ã‚‹é‚„å…ƒç‡ãŒ0ä»¥ä¸‹ã§ã™");
                 return;
            }

            const remainingMonths = getRemainingMonths();
            if (remainingMonths <= 0) { displayError(resultDiv, "æ®‹ã‚Šæœˆæ•°è¨ˆç®—ã‚¨ãƒ©ãƒ¼"); return; }

            const totalYenNeeded = Math.ceil((neededPoints / finalRate) * 100);
            const monthlyYenNeeded = Math.ceil(totalYenNeeded / remainingMonths);

            resultDiv.innerHTML = `
                â—† ç›®æ¨™ã¾ã§ã®å¿…è¦ãƒã‚¤ãƒ³ãƒˆ: <b>${neededPoints.toLocaleString('ja-JP')} pt</b><br>
                â—† åˆè¨ˆã®å¿…è¦èª²é‡‘é¡ç›®å®‰: <b>${totalYenNeeded.toLocaleString('ja-JP')} å††</b><br>
                â—† æœˆå¹³å‡ (${remainingMonths}ãƒ¶æœˆ): <b>ç´„ ${monthlyYenNeeded.toLocaleString('ja-JP')} å††/æœˆ</b><br>
                <span style="font-size:0.8em; color:#666;">(é©ç”¨é‚„å…ƒç‡: ${finalRate.toFixed(2)} pt/100å††)</span>
            `;
            resultDiv.classList.add(CLASS_HAS_RESULT);

            resultDiv.dataset.requiredYen = totalYenNeeded;
            resultDiv.dataset.targetStatusLabel = targetStatusLabel;
            if (tweetButton) tweetButton.classList.remove(CLASS_HIDDEN);

        } catch (error) {
            console.error("è¨ˆç®—ã‚¨ãƒ©ãƒ¼ (é€šå¸¸):", error);
            displayError(resultDiv, "è¨ˆç®—ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ");
        }
    }

    /**
     * é€†ç®—ãƒ¢ãƒ¼ãƒ‰ã§ã®ç²å¾—ãƒã‚¤ãƒ³ãƒˆã‚’è¨ˆç®—
     */
    function reverseCalculate() { // â˜… ã“ã®é–¢æ•°ã‚’ä¿®æ­£
        if (!reverseResultDiv) return;
        // clearResult(reverseResultDiv); // datasetã‚‚ã‚¯ãƒªã‚¢ã™ã‚‹ã®ã§ã€ã“ã“ã§ã¯æ‰‹å‹•ã§åˆæœŸåŒ–
        reverseResultDiv.innerHTML = "";
        reverseResultDiv.classList.remove(CLASS_HAS_RESULT);
        if (shareTwitterReverseButton) { // â˜… shareTwitterReverseButton ã¯ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚³ãƒ¼ãƒ—ã§å®£è¨€æ¸ˆã¿
            shareTwitterReverseButton.classList.add(CLASS_HIDDEN);
        }

        try {
            const amountYen = getValidNumberInput(amountYenInput, 0);
            const finalRate = getFinalRate(reverseBaseRateInput, reverseStatusSelect, reverseMultiplierInput);

            if (amountYen === null || finalRate === null) {
                // displayError(reverseResultDiv, "æœ‰åŠ¹ãªæ•°å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"); // displayErrorã¯datasetã‚’ã‚¯ãƒªã‚¢ã™ã‚‹ã®ã§ç›´æ¥æ›¸ã
                reverseResultDiv.innerHTML = `<span style="color: red;">æœ‰åŠ¹ãªæ•°å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</span>`;
                reverseResultDiv.classList.add(CLASS_HAS_RESULT);
                return;
            }
             if (finalRate < 0) {
                 // displayError(reverseResultDiv, "è¨ˆç®—ã«ä½¿ç”¨ã™ã‚‹é‚„å…ƒç‡ãŒè² æ•°ã§ã™");
                 reverseResultDiv.innerHTML = `<span style="color: red;">è¨ˆç®—ã«ä½¿ç”¨ã™ã‚‹é‚„å…ƒç‡ãŒè² æ•°ã§ã™</span>`;
                 reverseResultDiv.classList.add(CLASS_HAS_RESULT);
                 return;
             }

            const earnedPoints = (amountYen / 100) * finalRate;

            reverseResultDiv.innerHTML = `
                â—† ç²å¾—ãƒã‚¤ãƒ³ãƒˆäºˆæ¸¬: <b>${earnedPoints.toFixed(2)} pt</b><br>
                 <span style="font-size:0.8em; color:#666;">(é©ç”¨é‚„å…ƒç‡: ${finalRate.toFixed(2)} pt/100å††)</span>
                 `;
            reverseResultDiv.classList.add(CLASS_HAS_RESULT);

            // ã‚·ã‚§ã‚¢ç”¨ã«ãƒ‡ãƒ¼ã‚¿ã‚’datasetã«ä¿å­˜
            reverseResultDiv.dataset.earnedPoints = earnedPoints.toFixed(2);
            reverseResultDiv.dataset.amountYen = amountYen;

            if (shareTwitterReverseButton) {
                shareTwitterReverseButton.classList.remove(CLASS_HIDDEN);
            }

        } catch (error) {
            console.error("è¨ˆç®—ã‚¨ãƒ©ãƒ¼ (é€†ç®—):", error);
            // displayError(reverseResultDiv, "è¨ˆç®—ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ");
            reverseResultDiv.innerHTML = `<span style="color: red;">è¨ˆç®—ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</span>`;
            reverseResultDiv.classList.add(CLASS_HAS_RESULT);
        }
    }

    /**
     * è¨ˆç®—çµæœã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼
     */
    function copyResult() {
        if (!resultDiv) return;
        let textToCopy = "";
        const mainResultLines = resultDiv.querySelectorAll('b');
        if (mainResultLines.length > 0) {
            textToCopy = Array.from(mainResultLines)
                             .map(b => {
                                 const labelNode = b.previousSibling;
                                 const labelText = labelNode ? labelNode.textContent.trim().split(':')[0] : '';
                                 return labelText ? `${labelText}: ${b.innerText}` : b.innerText;
                             })
                             .join('\n');
        } else {
             textToCopy = (resultDiv.innerText || resultDiv.textContent || "").trim();
        }

        const isErrorMessage = resultDiv.querySelector(SELECTOR_RESULT_ERROR);
        if (isErrorMessage || !textToCopy || !resultDiv.classList.contains(CLASS_HAS_RESULT)) {
            alert("ã‚³ãƒ”ãƒ¼ã™ã‚‹è¨ˆç®—çµæœãŒã‚ã‚Šã¾ã›ã‚“");
            return;
        }

        if (navigator.clipboard && window.isSecureContext) {
            navigator.clipboard.writeText(textToCopy).then(() => {
                alert("è¨ˆç®—çµæœã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼");
            }).catch(err => {
                console.error('ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ API ã‚³ãƒ”ãƒ¼å¤±æ•—:', err);
                fallbackCopyTextToClipboard(textToCopy);
            });
        } else {
            console.warn("Clipboard API éå¯¾å¿œ/éã‚»ã‚­ãƒ¥ã‚¢ç’°å¢ƒã®ãŸã‚Fallbackå®Ÿè¡Œ");
            fallbackCopyTextToClipboard(textToCopy);
        }
    }

    /**
     * ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã‚³ãƒ”ãƒ¼ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ (execCommandã‚’ä½¿ç”¨)
     */
    function fallbackCopyTextToClipboard(text) {
        const tempTextArea = document.createElement("textarea");
        tempTextArea.value = text;
        tempTextArea.style.position = 'absolute'; tempTextArea.style.top = '-9999px'; tempTextArea.style.left = '-9999px';
        document.body.appendChild(tempTextArea);
        tempTextArea.focus(); tempTextArea.select();
        try {
            const successful = document.execCommand('copy');
            alert(successful ? "è¨ˆç®—çµæœã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼" : "ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ");
        } catch (err) {
            alert("ã‚³ãƒ”ãƒ¼ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ"); console.error('Fallback copy error:', err);
        } finally {
            document.body.removeChild(tempTextArea);
        }
    }

    /**
     * è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ï¼ˆé€šå¸¸è¨ˆç®—ï¼é€†ç®—ï¼‰ã‚’åˆ‡ã‚Šæ›¿ãˆ
     */
    function switchMode(mode) {
        if (!mainModeDiv || !reverseModeDiv || !tabButtons) { console.error("switchMode: DOMè¦ç´ æœªåˆæœŸåŒ–"); return; }
        mainModeDiv.style.display = (mode === 'main') ? 'block' : 'none';
        reverseModeDiv.style.display = (mode === 'reverse') ? 'block' : 'none';
        tabButtons.forEach(button => {
            if (button.dataset.mode === mode) { button.classList.add(CLASS_ACTIVE); }
            else { button.classList.remove(CLASS_ACTIVE); }
        });
        if (resultDiv) clearResult(resultDiv);
        if (reverseResultDiv) clearResult(reverseResultDiv); // â˜… é€†ç®—ãƒ¢ãƒ¼ãƒ‰ã®çµæœã‚‚ã‚¯ãƒªã‚¢
    }

    /**
     * ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã®è¡¨ç¤ºï¼éè¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆ
     */
    function toggleTooltip(event) {
        const btn = event.currentTarget;
        if (!btn) return;
        event.preventDefault(); event.stopPropagation();
        const tooltip = btn.nextElementSibling;
        if (!tooltip || !tooltip.classList.contains(SELECTOR_TOOLTIP_BOX.substring(1))) { console.error('Tooltip box not found', btn); return; }
        const isCurrentlyVisible = tooltip.classList.contains(CLASS_VISIBLE);
        closeAllTooltips(btn);
        if (!isCurrentlyVisible) {
            tooltip.classList.add(CLASS_VISIBLE);
            btn.setAttribute('aria-expanded', 'true');
        }
    }

     /**
     * é–‹ã„ã¦ã„ã‚‹ã™ã¹ã¦ã®ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã‚’é–‰ã˜ã‚‹
     */
    function closeAllTooltips(excludeButton = null) {
        document.querySelectorAll(`${SELECTOR_TOOLTIP_BOX}.${CLASS_VISIBLE}`).forEach(box => {
            const correspondingBtn = box.previousElementSibling;
            if (excludeButton && correspondingBtn === excludeButton) { return; }
            box.classList.remove(CLASS_VISIBLE);
            if (correspondingBtn && correspondingBtn.matches(SELECTOR_INFO_BTN)) {
                correspondingBtn.setAttribute('aria-expanded', 'false');
            }
        });
    }

    /**
     * ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚¯ãƒªãƒƒã‚¯æ™‚ã®å‡¦ç†ï¼ˆãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—å¤–ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹ï¼‰
     */
    function handleDocumentClick(event) {
        if (!event.target.closest(SELECTOR_INFO_BTN) && !event.target.closest(SELECTOR_TOOLTIP_BOX)) {
            closeAllTooltips();
        }
    }

    /**
     * ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œã§ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã‚’é–‰ã˜ã‚‹ (Escapeã‚­ãƒ¼)
     */
    function handleKeyDown(event) {
        if (event.key === 'Escape') { closeAllTooltips(); }
    }

    /**
     * ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ã®å‡¦ç† (ã‚µã‚¤ãƒˆURLè¿½åŠ ç‰ˆ)
     */
    function shareOnTwitter() {
        if (!resultDiv || !resultDiv.classList.contains(CLASS_HAS_RESULT)) {
            console.warn("ã‚·ã‚§ã‚¢ã™ã‚‹è¨ˆç®—çµæœãŒã‚ã‚Šã¾ã›ã‚“ã€‚");
            alert("ã‚·ã‚§ã‚¢ã§ãã‚‹æœ‰åŠ¹ãªè¨ˆç®—çµæœãŒã‚ã‚Šã¾ã›ã‚“ã€‚"); // â˜… ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ã‚¢ãƒ©ãƒ¼ãƒˆè¿½åŠ 
            return;
        }
        const requiredYenRaw = resultDiv.dataset.requiredYen;
        const targetStatusLabel = resultDiv.dataset.targetStatusLabel;

        if (!requiredYenRaw || !targetStatusLabel || resultDiv.querySelector(SELECTOR_RESULT_ERROR)) {
            console.error("ã‚·ã‚§ã‚¢ã«å¿…è¦ãªæƒ…å ±ãŒè¦‹ã¤ã‹ã‚‰ãªã„ã‹ã€çµæœãŒã‚¨ãƒ©ãƒ¼ã§ã™ã€‚");
            alert("ã‚·ã‚§ã‚¢ã§ãã‚‹æœ‰åŠ¹ãªè¨ˆç®—çµæœãŒã‚ã‚Šã¾ã›ã‚“ã€‚");
            return;
        }

        try {
            const requiredYen = parseFloat(requiredYenRaw);
            if (isNaN(requiredYen)) {
                throw new Error("é‡‘é¡ãƒ‡ãƒ¼ã‚¿ãŒç„¡åŠ¹ã§ã™ã€‚");
            }
            const formattedYen = requiredYen.toLocaleString('ja-JP');
            const siteUrl = "https://playpoint-sim.com/"; // â˜… ã‚µã‚¤ãƒˆURLä¿®æ­£

            const tweetText = `ã€Play ãƒã‚¤ãƒ³ãƒˆè©¦ç®—çµæœã€‘\n${targetStatusLabel}ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åˆ°é”ã¾ã§\n${formattedYen}å††èª²é‡‘ãŒå¿…è¦ã§ã™ã€‚\n\n#Playãƒã‚¤ãƒ³ãƒˆè¨ˆç®—ã—ã¦ã¿ãŸ\n#GooglePlayãƒã‚¤ãƒ³ãƒˆ\n\n${siteUrl}`; // â˜… ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°èª¿æ•´

            const encodedText = encodeURIComponent(tweetText);
            const twitterUrl = `https://twitter.com/intent/tweet?text=${encodedText}`;
            window.open(twitterUrl, '_blank');

        } catch (error) {
            console.error("ãƒ„ã‚¤ãƒ¼ãƒˆæº–å‚™ä¸­ã«ã‚¨ãƒ©ãƒ¼:", error);
            alert("ãƒ„ã‚¤ãƒ¼ãƒˆã®æº–å‚™ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚");
        }
    }

    // â–¼â–¼â–¼ ã“ã“ã‹ã‚‰æ–°ã—ã„é–¢æ•°ã‚’è¿½åŠ  â–¼â–¼â–¼
    /**
     * é€†ç®—çµæœã‚’Xã§ã‚·ã‚§ã‚¢ã™ã‚‹é–¢æ•°
     */
    function shareOnTwitterReverse() {
        if (!reverseResultDiv || !reverseResultDiv.classList.contains(CLASS_HAS_RESULT)) {
            console.warn("ã‚·ã‚§ã‚¢ã™ã‚‹é€†ç®—çµæœãŒã‚ã‚Šã¾ã›ã‚“ (ã‚¯ãƒ©ã‚¹ãªã—)ã€‚");
            alert("ã‚·ã‚§ã‚¢ã§ãã‚‹æœ‰åŠ¹ãªè¨ˆç®—çµæœãŒã‚ã‚Šã¾ã›ã‚“ã€‚");
            return;
        }

        const earnedPointsRaw = reverseResultDiv.dataset.earnedPoints;
        const amountYenRaw = reverseResultDiv.dataset.amountYen;

        if (reverseResultDiv.querySelector(SELECTOR_RESULT_ERROR) || !earnedPointsRaw || !amountYenRaw) {
            console.warn("ã‚·ã‚§ã‚¢ã«å¿…è¦ãªæƒ…å ±ãŒãªã„ã‹ã€çµæœãŒã‚¨ãƒ©ãƒ¼ã§ã™ã€‚");
            alert("ã‚·ã‚§ã‚¢ã§ãã‚‹æœ‰åŠ¹ãªè¨ˆç®—çµæœãŒã‚ã‚Šã¾ã›ã‚“ã€‚");
            return;
        }

        try {
            const earnedPoints = parseFloat(earnedPointsRaw);
            const amountYen = parseFloat(amountYenRaw);

            if (isNaN(earnedPoints) || isNaN(amountYen)) {
                throw new Error("ãƒã‚¤ãƒ³ãƒˆã¾ãŸã¯é‡‘é¡ãƒ‡ãƒ¼ã‚¿ãŒç„¡åŠ¹ã§ã™ã€‚");
            }

            const formattedPoints = earnedPoints.toLocaleString('ja-JP', { minimumFractionDigits: 0, maximumFractionDigits: 2 });
            const formattedYen = amountYen.toLocaleString('ja-JP');
            
            const siteUrl = "https://playpoint-sim.com/";
            const hashtags = "#Playãƒã‚¤ãƒ³ãƒˆè¨ˆç®—ã—ã¦ã¿ãŸ\n#GooglePlayãƒã‚¤ãƒ³ãƒˆ";

            const tweetText = `${formattedYen}å††ä½¿ã†ã¨ã€ç´„ ${formattedPoints}ãƒã‚¤ãƒ³ãƒˆ ç²å¾—ã§ãã¾ã™ï¼\n\n${hashtags}\n\n${siteUrl}`;

            const encodedText = encodeURIComponent(tweetText);
            const twitterUrl = `https://twitter.com/intent/tweet?text=${encodedText}`;
            window.open(twitterUrl, '_blank');

        } catch (error) {
            console.error("é€†ç®—çµæœã®ãƒ„ã‚¤ãƒ¼ãƒˆæº–å‚™ä¸­ã«ã‚¨ãƒ©ãƒ¼:", error);
            alert("ãƒ„ã‚¤ãƒ¼ãƒˆã®æº–å‚™ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚");
        }
    }
    // â–²â–²â–² ã“ã“ã¾ã§æ–°ã—ã„é–¢æ•°ã‚’è¿½åŠ  â–²â–²â–²


    // --- åˆæœŸåŒ–å‡¦ç† ---
    document.addEventListener('DOMContentLoaded', function() {
        // --- DOMè¦ç´ å‚ç…§ã®å–å¾— ---
        tabButtons = document.querySelectorAll(".tab-switch button");
        infoButtons = document.querySelectorAll(SELECTOR_INFO_BTN);
        mainModeDiv = document.getElementById("mainMode");
        reverseModeDiv = document.getElementById("reverseMode");
        currentStatusSelect = document.getElementById("currentStatus");
        baseRateInput = document.getElementById("baseRate");
        targetStatusSelect = document.getElementById("targetStatus");
        neededPointsInput = document.getElementById("neededPoints");
        multiplierInput = document.getElementById("multiplier");
        calculateButton = document.getElementById("calculateButton");
        resultDiv = document.getElementById("result");
        copyButton = document.getElementById("copyButton");
        tweetButton = document.getElementById("tweetButton");
        amountYenInput = document.getElementById("amountYen");
        reverseStatusSelect = document.getElementById("reverseStatus");
        reverseBaseRateInput = document.getElementById("reverseBaseRate");
        reverseMultiplierInput = document.getElementById("reverseMultiplier");
        reverseCalculateButton = document.getElementById("reverseCalculateButton");
        reverseResultDiv = document.getElementById("reverseResult");
        shareTwitterReverseButton = document.getElementById('share-twitter-reverse'); // â˜… DOMè¦ç´ å–å¾—ã‚’è¿½åŠ 

        // --- ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š ---
        if (currentStatusSelect) currentStatusSelect.addEventListener('change', updateBaseRateAndTarget);
        else console.warn("åˆæœŸåŒ–: #currentStatus not found.");
        if (calculateButton) calculateButton.addEventListener('click', calculate);
        else console.warn("åˆæœŸåŒ–: #calculateButton not found.");
        if (copyButton) copyButton.addEventListener('click', copyResult);
        else console.warn("åˆæœŸåŒ–: #copyButton not found.");
        if (tweetButton) tweetButton.addEventListener('click', shareOnTwitter);
        else console.warn("åˆæœŸåŒ–: #tweetButton not found.");
        if (reverseStatusSelect) reverseStatusSelect.addEventListener('change', updateReverseBaseRate);
        else console.warn("åˆæœŸåŒ–: #reverseStatus not found.");
        if (reverseCalculateButton) reverseCalculateButton.addEventListener('click', reverseCalculate);
        else console.warn("åˆæœŸåŒ–: #reverseCalculateButton not found.");
        
        // â˜… é€†ç®—ãƒ¢ãƒ¼ãƒ‰ã®ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 
        if (shareTwitterReverseButton) {
            shareTwitterReverseButton.addEventListener('click', shareOnTwitterReverse);
        } else {
            console.warn("åˆæœŸåŒ–: #share-twitter-reverse button not found.");
        }

        if (tabButtons.length > 0) {
            tabButtons.forEach(button => {
                if (button.dataset.mode) {
                    button.addEventListener('click', () => {
                         if(typeof switchMode === 'function') switchMode(button.dataset.mode);
                         else console.error("switchMode is not defined.");
                    });
                } else console.warn("åˆæœŸåŒ–: Tab button missing data-mode:", button);
            });
        } else console.warn("åˆæœŸåŒ–: Tab buttons not found.");
        if (infoButtons.length > 0) {
            infoButtons.forEach(button => {
                 button.addEventListener('click', toggleTooltip);
                 button.addEventListener('keydown', (event) => {
                    if (event.key === 'Enter' || event.key === ' ') {
                        event.preventDefault(); toggleTooltip(event);
                    }
                 });
            });
        } else console.warn("åˆæœŸåŒ–: Info buttons not found.");
        document.addEventListener('click', handleDocumentClick);
        document.addEventListener('keydown', handleKeyDown);

        // --- åˆæœŸè¡¨ç¤ºè¨­å®š ---
        try {
            if (currentStatusSelect && baseRateInput && targetStatusSelect) updateBaseRateAndTarget();
            if (reverseStatusSelect && reverseBaseRateInput) updateReverseBaseRate();
            if (mainModeDiv && reverseModeDiv && tabButtons) switchMode('main');
            if (tweetButton) tweetButton.classList.add(CLASS_HIDDEN);
            if (shareTwitterReverseButton) shareTwitterReverseButton.classList.add(CLASS_HIDDEN); // â˜… åˆæœŸã¯éè¡¨ç¤º
        } catch (error) {
            console.error("åˆæœŸåŒ–å‡¦ç†ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:", error);
            const body = document.querySelector('body');
            if (body) {
                const errorP = document.createElement('p');
                errorP.style.cssText = 'color:red; font-weight:bold; padding:1em; text-align:center; border:1px solid red; background-color:#fdd;';
                errorP.textContent = "ãƒšãƒ¼ã‚¸ã®èª­ã¿è¾¼ã¿ä¸­ã«å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ãŠæ‰‹æ•°ã§ã™ãŒã€ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„ã€‚";
                body.insertBefore(errorP, body.firstChild);
            }
        }
        console.log("ãƒã‚¤ãƒ³ãƒˆè¨ˆç®—æ©Ÿ åˆæœŸåŒ–å®Œäº† (SNSã‚·ã‚§ã‚¢/ç´¹ä»‹æ–‡ä»˜ã)");
    });

})();
    </script>

   <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
   <footer class="page-footer">
    <p>
      <a href="info.html">ã‚ã¨ãŒããƒ»Q&A</a> |
      <a href="https://docs.google.com/forms/d/e/1FAIpQLSe0HDPLt-jfNXuiGmJ3gxlxUtgeGJ5-AM16Bz2yNw5bk3irNw/viewform?usp=dialog" target="_blank" rel="noopener noreferrer">ã”æ„è¦‹ãƒ»ã”æ„Ÿæƒ³</a>
      <a href="about-playpoints.html">Playãƒã‚¤ãƒ³ãƒˆã¨ã¯ï¼Ÿ</a>
    </p>
    <p class="copyright">
      Â© 2025 PlayPoint Simulation Tool
    </p>
  </footer>

</body>
</html>
